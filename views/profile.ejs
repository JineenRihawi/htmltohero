<!DOCTYPE html>
<html dir="<%= t('direction') %>" lang="<%= lang %>">

<head>
    <%- include('components/metadata_info')%>
        <style>
            html,
            body {
                height: 100%;
                width: 100%;
                margin: 0;
                overflow-x: hidden;
                font-family: "Arial";
                color: #2d3748;
            }

            .page {
                height: calc(100% - 80px);
                /* Account for header */
                width: 100%;
                overflow-y: scroll;
                overflow-x: hidden;
            }

            .PAGECONTENT {
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 20px;
                padding-top: 30px;
                padding-bottom: 30px;
            }

            .profile-container {
                width: 90%;
                max-width: 1100px;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 30px;
                margin-bottom: 30px;
            }

            .profile-data {
                border-radius: 20px;
                padding: 30px;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                transition: transform 0.3s ease;
                background-color: #ffc2b1;
                width: 90%;
            }

            .profile-image {
                width: 120px;
                height: 120px;
                margin-bottom: 20px;
                border-radius: 50%;
                background: #fff;
                padding: 10px;
            }

            .data-details {
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: 12px;
                font-size: 1.2rem;
                line-height: 1.6;
            }

            .data-details-bar {
                background: rgba(255, 255, 255, 0.8);
                padding: 8px 15px;
                border-radius: 10px;
            }

            .learning-container,
            .exercise-container {
                border-radius: 20px;
                padding: 30px;
                width: 90%;
                max-width: 1100px;
                transition: transform 0.3s ease;
                background-color: #ffbe8a;
            }

            .container-title {
                font-size: 2rem;
                margin-bottom: 20px;
                text-align: center;
                font-weight: bold;
                color: #2d3748;
            }

            .container-buttons {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
                justify-content: center;
            }

            .container-button {
                flex: 1;
                user-select: none;
            }

            .container-button-btn {
                flex: 1;
                min-width: 150px;
                padding: 15px;
                color: white;
                font-size: 1.3rem;
                font-weight: bold;
                text-align: center;
                border-radius: 12px;
                transition: all 0.3s ease;
                cursor: pointer;
                border: 2px solid rgba(255, 255, 255, 0.3);
            }

            .container-button-btn:hover {
                background-color: #402e32;
            }

            .PROFILEIMAGE {
                width: 100px;
                height: 100px;
                margin-bottom: 20px;
                border: 5px solid white;
                border-radius: 100%;
                transition: all 0.5s ease;
            }

            .PROFILEIMAGE:hover {
                border-width: 10px;
            }

            @media (max-width: 1100px) {

                .profile-data,
                .learning-container,
                .exercise-container {
                    width: calc(100% - 40px);
                    padding: 20px;
                }

                .container-title {
                    font-size: 1.6rem;
                }

                .container-button {
                    font-size: 1.1rem;
                    padding: 12px;
                }

                .data-details {
                    font-size: 1rem;
                }
            }

            @media (max-width: 500px) {

                .profile-data,
                .learning-container,
                .exercise-container {
                    width: calc(100% - 30px);
                    padding: 15px;
                }

                .container-button {
                    font-size: 100%;
                }

                .container-title {
                    font-size: 100%;
                }
            }

            .POINTSRANGE {
                width: calc(100% - 30px);
                height: 25px;
                position: relative;
                background: rgba(255, 255, 255, 0.8);
                padding: 8px 15px;
                border-radius: 10px;
            }

            .POINTSRANGEBAR {
                height: 100%;
                background-color: rgb(250, 150, 150);
            }

            .DATACONTAINERDATA {
                padding: 0 15px 0 15px;
                width: calc(100% - 30px);
                height: calc(100% - 150px);
                color: #445368;
                font-family: "Arial";
                user-select: none;
                display: flex;
                flex-direction: column;
                gap: 5px;
            }

            .POINTSRANGEPERCENTAGE {
                font-size: 14px;
                position: absolute;
                top: 0;
                right: 5px;
                display: flex;
                height: 100%;
                justify-content: center;
                align-items: center;
            }
        </style>
</head>

<body>
    <%- include('components/header') %>
        <div class="page">
            <div class="PAGECONTENT">
                <div class="profile-container">
                    <div class="profile-data">

                        <svg class="PROFILEIMAGE" id="PROFILEIMAGESVG" fill="#EF6E72" version="1.1" id="Capa_1"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="55px"
                            height="55px" viewBox="0 0 45.532 45.532" id="profile_image">
                            <g>
                                <circle cx="22.766" cy="22.766" r="17" fill="#ffffff" />
                                <path d="M22.766,0.001C10.194,0.001,0,10.193,0,22.766s10.193,22.765,22.766,22.765c12.574,0,22.766-10.192,22.766-22.765
    S35.34,0.001,22.766,0.001z M22.766,6.808c4.16,0,7.531,3.372,7.531,7.53c0,4.159-3.371,7.53-7.531,7.53
    c-4.158,0-7.529-3.371-7.529-7.53C15.237,10.18,18.608,6.808,22.766,6.808z M22.761,39.579c-4.149,0-7.949-1.511-10.88-4.012
    c-0.714-0.609-1.126-1.502-1.126-2.439c0-4.217,3.413-7.592,7.631-7.592h8.762c4.219,0,7.619,3.375,7.619,7.592
    c0,0.938-0.41,1.829-1.125,2.438C30.712,38.068,26.911,39.579,22.761,39.579z" />
                            </g>
                        </svg>

                        <div class="data-details">
                            <div class="data-details-bar">
                                <%= t('profile.profileContainer.name') %>: <%= name %>
                            </div>
                            <div class="data-details-bar">
                                <%= t('profile.profileContainer.birthday') %>: <%= birthyear %>.<%= birthmonth %>.<%=
                                                birthday %>
                            </div>
                            <div class="data-details-bar">
                                <%= t('profile.profileContainer.accountCreationDate') %>: <%= createyear %>.<%=
                                            createmonth %>.<%= createday %>
                            </div>
                            <div class="data-details-bar">
                                <%= t('profile.profileContainer.level') %>: <%= level %>
                            </div>
                            <div class="POINTSRANGE">
                                <div class="POINTSRANGEBAR">
                                    <div class="POINTSRANGEPERCENTAGE">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="learning-container">
                        <div class="container-title">
                            <%= t('profile.learningContainer.continueLearning')%>
                        </div>
                        <div class="container-buttons">
                            <div class="container-button">
                                <div class="container-button-btn" id="HTML1">
                                    <%= t('profile.learningContainer.html') %>
                                </div>
                                <span>
                                    <%= t('htmlExercises.progress') %> : <%= qnumberHtml %>/55
                                </span>
                            </div>
                            <div class="container-button">
                                <div class="container-button-btn" id="CSS1">
                                    <%= t('profile.learningContainer.css') %>
                                </div>
                                <span>
                                    <%= t('cssExercises.progress') %> : <%= qnumberCss %>/44
                                </span>
                            </div>
                            <div class="container-button">
                                <div class="container-button-btn" id="JS1">
                                    <%= t('profile.learningContainer.js') %>
                                </div>
                                <span>
                                    <%= t('jsExercises.progress') %> : <%= qnumberJs %>/48
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="exercise-container">
                        <div class="container-title">
                            <%= t('profile.exercisingContainer.continueExercising')%>
                        </div>
                        <div class="container-buttons">
                            <div class="container-button">
                                <div class="container-button-btn" id="HTML2">
                                    <%= t('profile.learningContainer.html') %>
                                </div>
                                <span>
                                    <%= t('htmlExercises.progress') %> : <%= lastCompletedHtmlExerciseNumber %>/20
                                </span>
                            </div>
                            <div class="container-button">
                                <div class="container-button-btn" id="CSS2">
                                    <%= t('profile.learningContainer.css') %>
                                </div>
                                <span>
                                    <%= t('cssExercises.progress') %> : <%= lastCompletedCssExerciseNumber %>/20
                                </span>
                            </div>
                            <div class="container-button">
                                <div class="container-button-btn" id="JS2">
                                    <%= t('profile.learningContainer.js') %>
                                </div>
                                <span>
                                    <%= t('jsExercises.progress') %> : <%= lastCompletedJsExerciseNumber %>/24
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <%- include('components/footer') %>
            </div>
            <script>
                function getCookie(name) {
                    const cookiePattern = `${name}=`;
                    const cookies = document.cookie.split('; ');
                    for (let cookie of cookies) {
                        if (cookie.startsWith(cookiePattern)) {
                            return decodeURIComponent(cookie.substring(cookiePattern.length));
                        }
                    }
                    return null;
                }

                function deleteCookie(cookieName) {
                    document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
                }

                let pointsRange = document.querySelector(".POINTSRANGE");
                let pointsRangeBar = document.querySelector(".POINTSRANGEBAR");
                let pointsRangePercentage = document.querySelector(".POINTSRANGEPERCENTAGE");

                let pointsSTR = "<%= points %>";
                let pointsINT = parseInt(pointsSTR);
                let pointsPercentage = (pointsINT / 5);
                pointsRangeBar.style.width = pointsPercentage + "%";
                pointsRangePercentage.innerText = pointsINT + "/500 (%" + pointsPercentage + ")";

                let HTML1 = document.querySelector("#HTML1");
                let CSS1 = document.querySelector("#CSS1");
                let JS1 = document.querySelector("#JS1");
                let HTML2 = document.querySelector("#HTML2");
                let CSS2 = document.querySelector("#CSS2");
                let JS2 = document.querySelector("#JS2");

                HTML1.addEventListener("click", () => {
                    let link = "<%= lastCheckedHtmlPageLink %>";
                    if (link === "null" || link === "tutorialsHtml") {
                        window.location.href = "/" + lang_code + "/tutorials/HTML";
                    } else {
                        window.location.href = "/" + lang_code + "/tutorials/HTML/" + link;
                    }
                });

                CSS1.addEventListener("click", () => {
                    let link = "<%= lastCheckedCssPageLink %>";
                    if (link === "null" || link === "tutorialsCss") {
                        window.location.href = "/" + lang_code + "/tutorials/CSS";
                    } else {
                        window.location.href = "/" + lang_code + "/tutorials/CSS/" + link;
                    }
                });

                JS1.addEventListener("click", () => {
                    let link = "<%= lastCheckedJsPageLink %>";
                    if (link === "null" || link === "tutorialsJs") {
                        window.location.href = "/" + lang_code + "/tutorials/JS";
                    } else {
                        window.location.href = "/" + lang_code + "/tutorials/JS/" + link;
                    }
                });

                HTML2.addEventListener("click", () => {
                    window.location.href = "/" + lang_code + "/exercises/HTML";
                });

                CSS2.addEventListener("click", () => {
                    window.location.href = "/" + lang_code + "/exercises/CSS";
                });

                JS2.addEventListener("click", () => {
                    window.location.href = "/" + lang_code + "/exercises/JS";
                });
            </script>
</body>

</html>