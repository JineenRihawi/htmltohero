<style>
    .HEADER {
        width: 100%;
        height: 80px;
        background-color: #FAD473;
        display: flex;
        justify-content: space-between;
    }

    .HEADERLOGO {
        padding: 10px;
        height: 60px;
        width: 60px;
    }

    .DROPDOWNMENU {
        z-index: 1;
        position: relative;
    }

    .DROPDOWNMENU:hover .DROPDOWNMENUCONTENT {
        display: block;
    }

    .MENUBUTTON {
        padding: 25px;
        color: #445368;
        background-color: #FAD473;
        font-size: 24px;
        font-family: "Arial";
        font-weight: bold;
        user-select: none;
        height: 30px;
        /*80 - 2*padding */
    }

    .MENUBUTTON:hover {
        background-color: #ef9d6e;
        cursor: pointer;
    }

    .DROPDOWNMENUCONTENT {
        display: none;
        position: absolute;
        right: 0;
        background-color: #FAD473;
    }

    .HEADERHALF,
    .HEADERSECONDHALF {
        width: auto;
        height: 100%;
        display: flex;
        gap: 10px;
    }

    .HEADERSECONDHALF {
        display: flex;
        flex-direction: row-reverse;
        align-items: center;
    }

    .HEADERSEARCH {
        margin: 10px;
        border-radius: 500px;
        border: none;
        width: 250px;
        font-size: 20px;
    }

    .HEADERSEARCH:enabled {
        outline: none;
    }

    .LANGSELECT {
        height: 50px;
        user-select: none;
        cursor: pointer;
        border: none;
    }

    #LOGINBUTTON,
    #PROFILEIMAGE {
        display: none;
    }

    #PROFILEIMAGE {
        padding: 10px;
        width: 55px;
        height: 55px;
    }

    #HOMEBUTTON {
        padding: 10px;
        height: 60px;
    }

    #PROFILEIMAGE:hover {
        background-color: #FAD473;
    }

    #PROFILEIMAGE:hover {
        background-color: #FAD473;
    }

    #HOMEBUTTON:hover #HOMEBUTTONSVG {
        fill: #ef9d6e;
        cursor: pointer;
    }

    #PROFILEIMAGE:hover #PROFILEIMAGESVG {
        fill: #ef9d6e;
    }
</style>

<header class="HEADER">
    <div class="HEADERHALF">
        <div class="HEADERLOGO">
            <img
                src="https://raw.githubusercontent.com/Staroandtado/html-to-hero-assets/ed5dd6ce839cb8033ee60ccd707d998ab282e61e/html2hero-icon.svg">
        </div>
        <div style="display: flex;">
            <div class="DROPDOWNMENU">
                <div class="MENUBUTTON"> <%= t('header.html') %> </div>
                <div class="DROPDOWNMENUCONTENT">
                    <div class="MENUBUTTON HEADERTUTORIALSHTMLBUTTON"> <%= t('header.htmlTutorials') %> </div>
                    <div class="MENUBUTTON HEADEREXERCISESHTMLBUTTON"> <%= t('header.htmlExercises') %> </div>
                </div>
            </div>

            <div class="DROPDOWNMENU">
                <div class="MENUBUTTON"> <%= t('header.css') %> </div>
                <div class="DROPDOWNMENUCONTENT">
                    <div class="MENUBUTTON HEADERTUTORIALSCSSBUTTON"> <%= t('header.cssTutorials') %> </div>
                    <div class="MENUBUTTON HEADEREXERCISESCSSBUTTON"> <%= t('header.cssExercises') %> </div>
                </div>
            </div>

            <div class="DROPDOWNMENU">
                <div class="MENUBUTTON"> <%= t('header.js') %> </div>
                <div class="DROPDOWNMENUCONTENT">
                    <div class="MENUBUTTON HEADERTUTORIALSJSBUTTON"> <%= t('header.jsTutorials') %> </div>
                    <div class="MENUBUTTON HEADEREXERCISESJSBUTTON"> <%= t('header.jsExercises') %> </div>
                </div>
            </div>
            <div class="MENUBUTTON HEADERCODEEDITORBUTTON"> <%= t('header.codeEditor') %> </div>
        </div>
        <input class="HEADERSEARCH" type="search" placeholder=" <%= t('header.search') %> ">
        <div id="HOMEBUTTON">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="60" height="60" viewBox="0,0,256,256"
                id="HOMEBUTTONSVG">
                <g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt"
                    stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0"
                    font-family="none" font-weight="none" font-size="none" text-anchor="none"
                    style="mix-blend-mode: normal">
                    <g transform="scale(0.5,0.5)">
                        <path
                            d="M7.9,256c0,-137 111.1,-248.1 248.1,-248.1c137,0 248.1,111.1 248.1,248.1c0,137 -111.1,248.1 -248.1,248.1c-137,0 -248.1,-111.1 -248.1,-248.1z"
                            fill="#EF6E72" id="HOMEBUTTONSVG"></path>
                        <path
                            d="M408.1,206.8l-150.1,-74.9c-1.3,-0.6 -2.7,-0.6 -4,0l-150.2,74.9c-1.7,0.8 -2.7,2.4 -2.7,4.3v29.6c0,1.6 0.8,3.1 2.2,4c1.4,0.9 3.1,1 4.5,0.3l148.2,-74l148.1,74c0.6,0.3 1.3,0.5 2,0.5c0.9,0 1.8,-0.2 2.5,-0.7c1.4,-0.9 2.2,-2.4 2.2,-4v-29.8c0,-1.8 -1,-3.5 -2.7,-4.2z"
                            fill="#ffffff"></path>
                        <path d="M380.5,245.8l-124.5,-62l-124.5,62v115h69v-88.2h47.5v88.2h132.5z" fill="#ffffff"></path>
                        <path d="M263.7,272.6h32v32h-32z" fill="#EF6E72" id="HOMEBUTTONSVG"></path>
                    </g>
                </g>
            </svg>
        </div>
    </div>
    <div class="HEADERSECONDHALF">
        <div class="DROPDOWNMENU">
            <div class="MENUBUTTON" id="PROFILEIMAGE">
                <svg id="PROFILEIMAGESVG" fill="#EF6E72" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" width="55px" height="55px" viewBox="0 0 45.532 45.532"
                    id="profile_image">
                    <g>
                        <circle cx="22.766" cy="22.766" r="17" fill="#ffffff" />
                        <path d="M22.766,0.001C10.194,0.001,0,10.193,0,22.766s10.193,22.765,22.766,22.765c12.574,0,22.766-10.192,22.766-22.765
    S35.34,0.001,22.766,0.001z M22.766,6.808c4.16,0,7.531,3.372,7.531,7.53c0,4.159-3.371,7.53-7.531,7.53
    c-4.158,0-7.529-3.371-7.529-7.53C15.237,10.18,18.608,6.808,22.766,6.808z M22.761,39.579c-4.149,0-7.949-1.511-10.88-4.012
    c-0.714-0.609-1.126-1.502-1.126-2.439c0-4.217,3.413-7.592,7.631-7.592h8.762c4.219,0,7.619,3.375,7.619,7.592
    c0,0.938-0.41,1.829-1.125,2.438C30.712,38.068,26.911,39.579,22.761,39.579z" />
                    </g>
                </svg>
            </div>
            <div class="DROPDOWNMENUCONTENT">
                <div class="MENUBUTTON" id="PROFILEBUTTON"> <%= t('header.profile') %> </div>
                <div class="MENUBUTTON" id="LOGOUTBUTTON"> <%= t('header.logout') %> </div>
            </div>
        </div>
        <div class="MENUBUTTON" id="LOGINBUTTON">
            <%= t('header.login') %> 
        </div>
        <select class="LANGSELECT" name="language" id="LANGSELECT">
            <option value="en">EN</option>
            <option value="tr">TR</option>
            <option value="es">ES</option>
            <option value="fr">FR</option>
            <option value="de">DE</option>
            <option value="pt">PT</option>
            <option value="ar">AR</option>
            <option value="ru">RU</option>
        </select>
    </div>
</header>

<script>
    let lang_code = "<%= lang %>";

    function getCookie(name) {
        // Construct the cookie name as a search pattern
        const cookiePattern = `${name}=`;
        const cookies = document.cookie.split('; '); // Split cookies into individual parts

        for (let cookie of cookies) {
            if (cookie.startsWith(cookiePattern)) {
                // Extract the cookie value
                return decodeURIComponent(cookie.substring(cookiePattern.length));
            }
        }

        // Return null if cookie is not found
        return null;
    }

    function deleteCookie(cookieName) {
        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
    }

    let langSelect = document.querySelector(".LANGSELECT");
    langSelect.value = lang_code;
    langSelect.addEventListener("change", (e) => {
        var currentPathArray = window.location.pathname.split('/');
        if(currentPathArray[0].length !== 0) {
            currentPathArray[0] = e.target.value;
        } else {
            currentPathArray[1] = e.target.value;
        }
        window.location.href = currentPathArray.join('/')
    })

    let loginButton = document.querySelector("#LOGINBUTTON");
    loginButton.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/" + "login";
    });

    let profilePicture = document.querySelector("#PROFILEIMAGE");
    const isLoggedIn = getCookie("isLoggedIn");
    if (isLoggedIn === null || isLoggedIn == "false") {
        loginButton.style.display = "block";
    }
    if (isLoggedIn == "true") {
        profilePicture.style.display = "inline";
    }

    let exercisesHtml = document.querySelector(".HEADEREXERCISESHTMLBUTTON");
    exercisesHtml.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/exercises/HTML";
    });

    let exercisesCss = document.querySelector(".HEADEREXERCISESCSSBUTTON");
    exercisesCss.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/exercises/CSS";
    });

    let exercisesJs = document.querySelector(".HEADEREXERCISESJSBUTTON");
    exercisesJs.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/exercises/JS";
    });

    let tutorialsHtml = document.querySelector(".HEADERTUTORIALSHTMLBUTTON");
    tutorialsHtml.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/tutorials/HTML";
    });

    let tutorialsCss = document.querySelector(".HEADERTUTORIALSCSSBUTTON");
    tutorialsCss.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/tutorials/CSS";
    });

    let tutorialsJs = document.querySelector(".HEADERTUTORIALSJSBUTTON");
    tutorialsJs.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/tutorials/JS";
    });

    let homeButton = document.querySelector("#HOMEBUTTON");
    homeButton.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code;
    });

    let profileImage = document.querySelector("#PROFILEIMAGE");
    profileImage.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/profile";
    });

    let profileButton = document.querySelector("#PROFILEBUTTON");
    profileButton.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/profile";
    });

    let logoutButton = document.querySelector("#LOGOUTBUTTON");
    logoutButton.addEventListener("click", (event) => {
        deleteCookie("isLoggedIn");
        deleteCookie("currentEmail");
        deleteCookie("currentPassword")
        window.location.href = "/" + lang_code;
    });

    let codeEditorButton = document.querySelector(".HEADERCODEEDITORBUTTON");
    codeEditorButton.addEventListener("click", (event) => {
        window.location.href = "/" + lang_code + "/codeeditor";
    });
</script>